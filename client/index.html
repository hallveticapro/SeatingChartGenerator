<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
    
    <!-- Primary Meta Tags -->
    <title>Classroom Seating Chart Builder | Interactive Desk Layout Tool for Teachers</title>
    <meta name="title" content="Classroom Seating Chart Builder | Interactive Desk Layout Tool for Teachers" />
    <meta name="description" content="Create dynamic classroom seating charts with drag-and-drop desk placement, student management, seating constraints, and professional PDF export. Free web-based tool for educators." />
    <meta name="keywords" content="classroom seating chart, teacher tools, desk layout, student assignment, classroom management, education software, seating planner" />
    <meta name="author" content="Classroom Seating Chart Builder" />
    <meta name="robots" content="index, follow" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://classroom-seating-chart.com/" />
    <meta property="og:title" content="Classroom Seating Chart Builder | Interactive Desk Layout Tool for Teachers" />
    <meta property="og:description" content="Create dynamic classroom seating charts with drag-and-drop desk placement, student management, seating constraints, and professional PDF export. Free web-based tool for educators." />
    <meta property="og:image" content="https://classroom-seating-chart.com/og-image.png" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:site_name" content="Classroom Seating Chart Builder" />
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://classroom-seating-chart.com/" />
    <meta property="twitter:title" content="Classroom Seating Chart Builder | Interactive Desk Layout Tool for Teachers" />
    <meta property="twitter:description" content="Create dynamic classroom seating charts with drag-and-drop desk placement, student management, seating constraints, and professional PDF export. Free web-based tool for educators." />
    <meta property="twitter:image" content="https://classroom-seating-chart.com/og-image.png" />
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <meta name="theme-color" content="#3B82F6" />
    
    <!-- Additional SEO -->
    <link rel="canonical" href="https://classroom-seating-chart.com/" />
    <meta name="application-name" content="Classroom Seating Chart Builder" />
    <meta name="msapplication-TileColor" content="#3B82F6" />
    <meta name="msapplication-config" content="/browserconfig.xml" />
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Classroom Seating Chart Builder",
      "description": "Create dynamic classroom seating charts with drag-and-drop desk placement, student management, seating constraints, and professional PDF export. Free web-based tool for educators.",
      "url": "https://classroom-seating-chart.com/",
      "applicationCategory": "Education",
      "operatingSystem": "Web Browser",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "creator": {
        "@type": "Organization",
        "name": "Classroom Seating Chart Builder"
      },
      "keywords": "classroom seating chart, teacher tools, desk layout, student assignment, classroom management, education software",
      "audience": {
        "@type": "Audience",
        "audienceType": "Teachers, Educators, School Administrators"
      },
      "featureList": [
        "Drag-and-drop desk placement",
        "Student management system",
        "Seating constraints and rules",
        "PDF export functionality",
        "Grid-based layout system",
        "Responsive design for mobile and desktop"
      ]
    }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script>
      // Manual jsPDF implementation - embed a minimal PDF creator
      window.createSimplePDF = function(canvas, filename) {
        return new Promise((resolve, reject) => {
          try {
            // Convert canvas to image
            const imgData = canvas.toDataURL('image/jpeg', 0.9);
            
            // Create a simple PDF using data URI
            const pdf = {
              width: canvas.width,
              height: canvas.height,
              addImage: function(data, format, x, y, width, height) {
                this.imageData = data;
              },
              save: function(name) {
                // Create a simple PDF-like structure
                const link = document.createElement('a');
                
                // For now, download as high-quality image
                link.href = this.imageData;
                link.download = name.replace('.pdf', '.png');
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
              }
            };
            
            resolve(pdf);
          } catch (error) {
            reject(error);
          }
        });
      };
      
      // Also try to load real jsPDF as backup
      window.loadPDFLibraries = async function() {
        return new Promise((resolve) => {
          if (window.jsPDF) {
            resolve(true);
            return;
          }
          
          // Try multiple CDN sources with working versions
          const sources = [
            'https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js',
            'https://unpkg.com/jspdf@2.4.0/dist/jspdf.umd.min.js',
            'https://cdn.jsdelivr.net/npm/jspdf@2.4.0/dist/jspdf.umd.min.js'
          ];
          
          let currentIndex = 0;
          
          function tryNextSource() {
            if (currentIndex >= sources.length) {
              console.log('All jsPDF sources failed, using fallback');
              resolve(false); // Use fallback
              return;
            }
            
            const script = document.createElement('script');
            script.src = sources[currentIndex];
            script.async = false;
            
            script.onload = function() {
              setTimeout(() => {
                console.log('Script loaded, checking jsPDF:', typeof window.jsPDF, window.jsPDF);
                // Check for different patterns of jsPDF global
                if (window.jsPDF || window.jspdf) {
                  console.log('jsPDF loaded successfully from:', sources[currentIndex]);
                  if (window.jspdf && !window.jsPDF) {
                    window.jsPDF = window.jspdf;
                  }
                  resolve(true);
                } else {
                  console.log('jsPDF not found, trying next source');
                  currentIndex++;
                  tryNextSource();
                }
              }, 200);
            };
            
            script.onerror = function() {
              console.log('Failed to load from:', sources[currentIndex]);
              currentIndex++;
              tryNextSource();
            };
            
            document.head.appendChild(script);
          }
          
          tryNextSource();
        });
      };
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    <!-- This is a replit script which adds a banner on the top of the page when opened in development mode outside the replit environment -->
    <script type="text/javascript" src="https://replit.com/public/js/replit-dev-banner.js"></script>
  </body>
</html>
